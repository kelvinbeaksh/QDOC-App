version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci
    build:
      commands:
        - REACT_APP_API_BASE_URL=${API_BASE_URL} \
          REACT_APP_BASE_URL=${BASE_URL} \
          REACT_APP_NODE_ENV=production \
          REACT_APP_FIREBASE_EMULATOR_URL= \
          REACT_APP_FIREBASE_API_KEY=${FIREBASE_API_KEY} \
          REACT_APP_FIREBASE_AUTH_DOMAIN=${FIREBASE_AUTH_DOMAIN} \
          REACT_APP_FIREBASE_PROJECT_ID=${FIREBASE_PROJECT_ID} \
          REACT_APP_FIREBASE_STORAGE_BUCKET=${FIREBASE_STORAGE_BUCKET} \
          REACT_APP_FIREBASE_MESSAGING_SENDER_ID=${FIREBASE_MESSAGING_SENDER_ID} \
          REACT_APP_FIREBASE_APP_ID=${FIREBASE_APP_ID} \
          REACT_APP_FIREBASE_MEASUREMENT_ID=${FIREBASE_MEASUREMENT_ID} \
          REACT_APP_ZOOM_SDK_KEY=${ZOOM_SDK_KEY} \
          REACT_APP_ZOOM_SDK_SECRET=${ZOOM_SDK_SECRET} \
          REACT_APP_TWILIO_ACCOUNT_SID=${TWILIO_ACCOUNT_SID} \
          REACT_APP_TWILIO_ACCOUNT_TOKEN=${TWILIO_ACCOUNT_TOKEN} \
          REACT_APP_TWILIO_VERIFY_SERVICE_SID=${TWILIO_VERIFY_SERVICE_SID} \
          npm run build
  artifacts:
    baseDirectory: build
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
